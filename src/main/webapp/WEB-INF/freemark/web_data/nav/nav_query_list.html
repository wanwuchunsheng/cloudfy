<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
	<meta charset="utf-8" />
	<title>云朵家-商品明细</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<!-- BEGIN GLOBAL MANDATORY STYLES -->
	<link href="${resRoot}/media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<link href="${resRoot}/media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
	<link href="${resRoot}/media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="${resRoot}/media/css/style-metro.css" rel="stylesheet" type="text/css"/>
	<link href="${resRoot}/media/css/style.css" rel="stylesheet" type="text/css"/>
	<link href="${resRoot}/media/css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<link href="${resRoot}/media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="${resRoot}/media/css/jquery.fancybox.css" rel="stylesheet" />
	<link href="${resRoot}/media/css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<!-- END GLOBAL MANDATORY STYLES -->
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="${resRoot}/media/css/select2_metro.css" />
	<link rel="stylesheet" href="${resRoot}/media/css/DT_bootstrap.css" />
	<!-- END PAGE LEVEL STYLES -->
	<link rel="shortcut icon" href="${resRoot}/media/image/favicon.ico" />
		
	 
	    
</head>

<!-- END HEAD -->

<!-- BEGIN BODY -->

<body style="background-color: #fff;">

	<!-- BEGIN PAGE -->
		<div class="page-content2">
			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<div id="portlet-config" class="modal hide">
				<div class="modal-header">
					<button data-dismiss="modal" class="close" type="button"></button>
					<h3>商品明细-查询</h3>
				</div>
				
			</div>

			<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<!-- BEGIN PAGE CONTAINER-->        
			<div class="container-fluid">
				<!-- BEGIN PAGE HEADER-->
				<div class="row-fluid">
					<div class="span12">
						<!-- BEGIN PAGE TITLE & BREADCRUMB-->
						<h3 class="page-title">
							商品明细-查询
						</h3>
						<ul class="breadcrumb">
							<li>
								<i class="icon-home"></i>
								<a href="index.html">首页</a> 
								<i class="icon-angle-right"></i>
							</li>
							<li>
								<a href="#">商品明细</a>
								
							</li>
							
						</ul>
						<!-- END PAGE TITLE & BREADCRUMB-->
					</div>
				</div>

				<!-- END PAGE HEADER-->
				<!-- BEGIN PAGE CONTENT-->
				<div class="row-fluid">
					<div class="span12">
						<!-- BEGIN EXAMPLE TABLE PORTLET-->
						<div class="portlet box blue">
							<div class="portlet-title">
								<div class="caption"><i class="icon-query"></i>查询详细</div>
								<div class="tools">
									<!-- <a href="javascript:;" class="collapse"></a>
									<a href="#portlet-config" data-toggle="modal" class="config"></a>
									<a href="javascript:;" class="reload"></a>
									<a href="javascript:;" class="remove"></a> -->
								</div>
							</div>

							<div class="portlet-body">
                              <div class="titleStl">
									<div class="form-group">
										<label class="col-md-4 control-label">商品类型：</label>
										<div class="col-md-8">
											<select  id="acCode"  name="acCode" class="form-control" tabindex="-1">
					                            <option value="">全部</option>
										        <#list commondityNav as list > 
										        <option value="${list.code}">${list.navTitle?if_exists}</option>
										        </#list>
										    </select>
										</div>
										 <div class="clearfix"></div>
									</div>
								
									<div class="btn-group">
										<label class="control-label col-md-4">标题名称：</label>
										<div class="col-md-8">
											<input id="title" name="title" type="text" class="form-control">
										</div>
										<div class="clearfix"></div>
									</div>
								
									<div class="btn-group">
									    <div class="col-md-4">
											<button onclick="queryPage()" class="btn blue">查询</button>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="btn-group">
										<div class="col-md-4">
											<button id="resetButton" class="btn green">重置</button>
										</div>
										<div class="clearfix"></div>
									</div>
								</div>
							    <div class="clearfix"></div>
							    <br/>
								<div class="col-md-12">
									<div class="btn-group">
										<button id="addNavigationButton" class="btn green" data-target="#addQuestionnaire" data-toggle="modal">
											添加
											<i class="fa fa-plus"></i>
										</button>
									</div>
									<div class="btn-group">
										<button id="deleteNavigationButton" class="btn red">
											删除
											<i class="fa fa-times"></i>
										</button>
									</div>
									<div class="btn-group">
										<button id="updateNavigationButton" class="btn green" data-target="#addQuestionnaire" data-toggle="modal">
											修改
											<i class="fa fa-edit"></i>
										</button>
									</div>
									<div class="btn-group">
										<button id="refreshBut" class="btn blue" data-target="#addQuestionnaire" data-toggle="modal">
											刷新缓存
											<i class="fa fa-refresh"></i>
										</button>
									</div>
								</div>
                                <br/>
								<table class="table table-striped table-hover table-bordered" id="table1">
									<thead>
										<tr>
										    <th>
												<input onclick="selectAll()" type="checkbox" id="selChan" class="group-checkable"/>
												
									        </th>
											<th>商品类型</th>
											<th>标题</th>
											<th>推荐指数</th>
											<th>价格</th>
											<th>排序</th>
											<th>是否启用 </th>
											<th>添加时间</th>
											<th>添加人</th>
										</tr>
									</thead>

									<tbody>

										

									</tbody>

								</table>

							</div>

						</div>

						<!-- END EXAMPLE TABLE PORTLET-->

					</div>

				</div>

				<!-- END PAGE CONTENT -->

			</div>

			<!-- END PAGE CONTAINER-->

		</div>

	
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->
	<script src="${resRoot}/media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script src="${resRoot}/media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="${resRoot}/media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      
	<script src="${resRoot}/media/js/bootstrap.min.js" type="text/javascript"></script>
	<!--[if lt IE 9]>
	<script src="${resRoot}/media/js/excanvas.min.js"></script>
	<script src="${resRoot}/media/js/respond.min.js"></script>  
	<![endif]-->   
	<script src="${resRoot}/media/js/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="${resRoot}/media/js/jquery.blockui.min.js" type="text/javascript"></script>  
	<script src="${resRoot}/media/js/jquery.cookie.min.js" type="text/javascript"></script>
	<script src="${resRoot}/media/js/jquery.uniform.min.js" type="text/javascript" ></script>
	<script src="${resRoot}/media/js/jquery.fancybox.pack.js"></script>
	<!-- END CORE PLUGINS -->
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script type="text/javascript" src="${resRoot}/media/js/jquery.dataTables.js"></script>
	<script type="text/javascript" src="${resRoot}/media/js/DT_bootstrap.js"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="${resRoot}/media/js/app.js"></script>
	<!-- 美化滚动条 -->
	<script src="${futRoot}/statics/resources/view/js/jquery.nicescroll.min.js"></script>
	<script src="${futRoot}/statics/resources/view/js/core.js"></script>  
	
    <script src="${resRoot}/media/js/DateFormat.js" type="text/javascript"></script> 
	<script>
		admin = {
				
		};
		jQuery(document).ready(function() { 
		   App.init();
		   //TableEditable.init();
		   queryPage();
		 //刷新系统缓存
		    $("#refreshBut").click(function(){
	    	    $.ajax({
			   		url : "${futRoot}/p/resSysData",
			   		type : "post",
			   	    async: false,
			   		data : null,
			   		success : function(data) {
				   		console.log(data);
			   		    // 1-成功  2-失败
						if(data=="1"){
							alert("刷新成功！");
						}else{
							alert("刷新失败！");
						}
			   		}
			     });
	        })
		
			
		    //重置
			$("#resetButton").click(function(){
				$("#title").val("");
				$("#acCode").find("option[value='']").attr("selected",true);
				$("select").select2();
			});
				
			 /** 导航菜单 跳转 修改 */
			 $("#updateNavigationButton").click(function(){
				    //获得参数
			        var item = document.getElementsByName("checkBoxt");
			        var str = "";
			        var let=0;
			        for (var i = 0; i < item.length; i++) {
			            if (item[i].checked == true) {
			                var k = item[i].value;
			                let++; //验证是否选中单个
			                str+=k; //接收选中值
			            }
			        }
			        if(let>1){
			        	alert("修改失败，只能选择单个进行修改！");
			        	return false;
			        }
			        if(str=="" || str==undefined){
			        	alert("请选择后再操作！");
			            return false;
			        }
			        //获得ID
			        window.location.href="${futRoot}/web/nav/gotoNavUpdatePage.htm?id="+str;
			   });
				
			   /**  删除   */
			   $("#deleteNavigationButton").click(function(){
			    	//获取ID
			        var item = document.getElementsByName("checkBoxt");
			        var str = "";
			        for (var i = 0; i < item.length; i++) {
			            if (item[i].checked == true) {
			                var k = item[i].value;
			                str+=k+","; 
			            }
			        }
			        //验证是否选中
			        if(str==""){
			        	alert("删除失败，请选择后删除!");
			        	return false;
			        }
			        if (window.confirm('确定删除吗？')) {
			        	//提交后台处理
				        $.ajax({
					   		url : "${futRoot}/web/nav/deleteCommondityInfo.json",
					   		type : "post",
					   		dataType : "json",
					   	    async: false,
					   		data : {"ids":str},
					   		success : function(data) {
					   		    // 1-成功  2-失败
								if(data=="1"){
									alert("删除成功！");
								    //刷新列表
									admin.dataTable.fnDraw();
							   		return false;
							   		
								}else{
									alert("删除失败！");
								}
					   		}
					  });
	              }
			   });
			   
		     /**  增加 */
			 $("#addNavigationButton").click(function(){
				 window.location.href="${futRoot}/web/nav/gotoAddNavInfo";
		     });
		 });
		


		 /** 分页列表  */
		function queryPage() {
			//$('#table1').dataTable().fnDestroy();
			if( admin.dataTable ){
				admin.dataTable.fnDestroy();
			}
			//显示查询条件
			admin.dataTable = $('#table1').dataTable({
				"bFilter" : false,
				"bSort" : false, // 排序功能
				"processing" : true, // 设置异步请求时，是否有等待框。
				"sAjaxSource" : '${futRoot}/web/nav/queryNavInfoPage.json',
				 "fnServerParams" : function(aoData) {
						aoData.push({
							"name" : "acCode", 
							"value":$('#acCode').find("option:selected").val()
						},{
							"name" : "title", 
							"value" : $('#title').val()
						}); 
					},
				"sServerMethod" : "post",
				"bServerSide" : true, // 异步请求
				"aoColumns" : [ {
					"mData" : "id",
					"sWidth": "5%",
					"mRender" : function(data, type, row) {
						if (data) {
							//return "<input onclick='selectAll()' type='checkbox' id='selChan' class='group-checkable'/>";
							return "<input id='selChan' name='checkBoxt' type='checkbox' style='width:15px;height:15px;' class='toggle fileupload-toggle-checkbox' value="+data+" />";
						}
					}
				}, {
					"mData" : "navName",
					"sWidth": "10%",
					"mRender" : function(data, type, row) {
						if (data) {
							return data;
						}
					}
				},{
					"mData" : "title",
					"sWidth": "25%",
					"mRender" : function(data, type, row) {
						if(data){
							return data;
						}
					}
				}, {
					"mData" : "hot",
					"sWidth": "10%",
					"mRender" : function(data, type, row) {
						return data;
					}
				}, {
					"mData" : "price",
					"sWidth": "5%",
					"mRender" : function(data, type, row) {
						if (data) {
							return data;
						}
					}
				}, {
					"mData" : "num",
					"sWidth": "5%",
					"mRender" : function(data, type, row) {
						if (data==0) {
							return "<font>0</font>";
						}else{
                            return data;
						}
					}
				}, {
					"mData" : "del",
					"sWidth": "10%",
					"mRender" : function(data, type, row) {
						if (data==1) {
							return "<font style='color:red;'>禁用</font>";
						}else if(data==0){
                            return "<font style='color:green;'>启用</font>";
						}
					}
				}, {
					"mData" : "createTime",
					"sWidth": "15%",
					"mRender" : function(data, type, row) {
						if (data) {
							return new Date(data).format('yyyy-MM-dd hh:mm:ss');
							//return data;
						}
					}
				}, {
					"mData" : "createUserName",
					"sWidth": "20%",
					"mRender" : function(data, type, row) {
						return data;
					}
				}],
				
				"aLengthMenu" : [[5,10, 15, 20], [5,10, 15, 20]],
				"iDisplayLength" : 5,
				"sPaginationType" : "bootstrap",
				"aaSorting" : [[2, "asc"]], //列数
				"aoColumnDefs" : [{
					"sDefaultContent" : '',
					"aTargets" : ["_all"]
				} ],
				"fnServerData" : function(sSource, aoData, fnCallback) {
					$.ajax({
						"dataType" : 'json',
						"type" : "POST",
						"url" : sSource,
						"data" : aoData,
						"success" : fnCallback,
						"timeout" : 3000000, // 连接超时时间
						"error" : function handleAjaxError(xhr, textStatus, error) {
							if (textStatus === "timeout") {
								//$.dopErr("连接超时!请稍后再试!!!");
								alert("连接超时!请稍后再试!!!");
							} else if (textStatus == "error") {
								//$.dopErr("系统繁忙!!!,请稍后再试!!!", null);
								alert("系统繁忙!!!,请稍后再试!!!");
							}
							admin.dataTable.fnProcessingIndicator(false);
							// 这里是把"正在查询几个子去掉，(换成自己的id)
						}
					});
				}, //设置异常处理
				"oLanguage" : {
					"sLengthMenu" : "每页显示 _MENU_ 条记录",
					"sZeroRecords" : "抱歉， 没有找到",
					"sInfo" : "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
					"sInfoEmpty" : " ",
					"sProcessing" : "正在查询....",
					"sInfoFiltered" : "",
					"oPaginate" : {
						"sFirst" : "首页",
						"sPrevious" : "前一页",
						"sNext" : "后一页",
						"sLast" : "尾页"
					}
				}
			});
		}
	</script>
</body>
<!-- END BODY -->
</html>